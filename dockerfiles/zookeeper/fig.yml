---

# A Zookeeper node.
#
# Run with:
#
#   ADVERTISE=<my-reachable-ip> fig up
#
# Connect to a cluster with:
#
#   ADVERTISE=<my-reachable-ip> CONTACT=<known-node> fig up
#

zookeeper:
  build: .
  volumes:
    - /:/host
  volumes_from:
    - zookeeperdata
  ports:
    - "7946:7946"
    - "7373:7373"
    - "2181:2181"
    - "2888:2888"
    - "3888:3888"
  net: "host"
  environment:
    DOCKER_BINARY: /usr/bin/docker
    DOCKER_SOCKET: /run/docker.sock
    ROLE: zookeeper
    CONTACT:
    ADVERTISE:
    BIND_PORT:
    NODE:

zookeeperdata:
  image: ubuntu
  volumes:
    - ./:/data
    - ./zoo.cfg:/opt/zookeeper-3.4.5/conf/zoo.cfg
